<div class="p-grid p-jc-center">
  <div style="width: 94%">
    <div class="p-col-12">
      <p-steps [style]="{'backgroundColor': '#1e1e1e'}" [activeIndex]="abaAtual"
               [model]="itens" [readonly]="true"></p-steps>
    </div>

    <p-card [hidden]="!(abaAtual == 0)"
            header="Escolha a campanha que seu personagem vai participar:">
      <div class="p-grid p-jc-center">
        <div *ngFor="let campanha of campanhas; index as i;"
             class="p-col-5" (click)="this.personagem.campanha = campanha"
             [ngClass]="retornarClasse(campanha.id)">
          <div class="item-interno">
            <p style="font-weight: bolder">
              {{campanha.titulo}}
            </p>
            <p>
              {{campanha.descricao}}
            </p>
          </div>
        </div>
      </div>
    </p-card>

    <p-card
      [hidden]="!(abaAtual == 1)">
      <div class="p-grid p-jc-center">
        <div class="p-col-6">
          <p-button label="Raça" [style]="{'width':'100%'}"
                    icon="pi pi-bars" (onClick)="showSelecionarRaca = true">
          </p-button>
        </div>
        <div class="p-col-6">
          {{personagem.raca.id === null ? '' : 'Sua raça: ' + personagem.raca.nome}}
        </div>

        <div class="p-col-6">
          <p-button label="Classe" [style]="{'width':'100%'}"
                    [disabled]="personagem.raca.id === null"
                    icon="pi pi-check" (onClick)="showSelecionarClasse = true">
          </p-button>
        </div>
        <div class="p-col-6">
          {{personagem.classe.id === null ? '' : 'Sua classe: ' + personagem.classe.nome}}
        </div>
      </div>
    </p-card>

    <p-card [hidden]="!(abaAtual == 2)">
      <ng-template pTemplate="content">
        <div class="p-grid">
          <div class="p-col-8">
            <label for="nome">Nome:</label>
            <br/>
            <input id="nome" type="text"
                   pInputText [(ngModel)]="personagem.nome"
                   style="width: 100%">
          </div>
          <div class="p-col-4">
            <label>Gênero:</label>
            <br/>
            <div class="p-d-flex">
              <p-radioButton value="M" [(ngModel)]="personagem.sexo"
                             label="Masculino"></p-radioButton>
              <p-radioButton value="F" [(ngModel)]="personagem.sexo" [style]="{'margin-left': '12px'}"
                             label="Feminino"></p-radioButton>
              <p-radioButton value="I" [(ngModel)]="personagem.sexo" [style]="{'margin-left': '12px'}"
                             label="Indefinido"></p-radioButton>
            </div>
          </div>
          <div class="p-col-4">
            <label>Idade:</label>
            <br/>
            <p-inputNumber [(ngModel)]="personagem.idade" [style]="{'width': '100%'}"
                           [minFractionDigits]="2"></p-inputNumber>
          </div>
          <div class="p-col-4">
            <label>Altura (m):</label>
            <br/>
            <p-inputNumber [(ngModel)]="personagem.altura" mode="decimal" [style]="{'width': '100%'}"
                           [minFractionDigits]="2"></p-inputNumber>
          </div>
          <div class="p-col-4">
            <label>Peso (kg):</label>
            <br/>
            <p-inputNumber [(ngModel)]="personagem.peso" mode="decimal" [style]="{'width': '100%'}"
                           [minFractionDigits]="2"></p-inputNumber>
          </div>
          <div class="p-col-4">
            <label>Pele:</label>
            <br/>
            <button pButton pRipple type="button" (click)="showSelecionarPele = true"
                    [label]="personagem.pele.id != null ? personagem.pele.descricao : 'Clique aqui para selecionar'"
                    [style]="{'width': '100%', 'background-color': personagem.pele.id != null ? personagem.pele.codigoCor : '#ffd54f'}">
            </button>
          </div>
          <div class="p-col-4">
            <label>Cabelo:</label>
            <br/>
            <button pButton pRipple type="button" (click)="showSelecionarCabelo = true"
                    [label]="personagem.cabelo.id != null ? personagem.cabelo.descricao : 'Clique aqui para selecionar'"
                    [style]="{'width': '100%', 'background-color': personagem.cabelo.id != null ? personagem.cabelo.codigoCor : '#ffd54f'}">
            </button>
          </div>
          <div class="p-col-4">
            <label>Olho:</label>
            <br/>
            <button pButton pRipple type="button" (click)="showSelecionarOlho = true"
                    [label]="personagem.olho.id != null ? personagem.olho.descricao : 'Clique aqui para selecionar'"
                    [style]="{'width': '100%', 'background-color': personagem.olho.id != null ? personagem.olho.codigoCor : '#ffd54f'}">
            </button>
          </div>
        </div>
      </ng-template>
    </p-card>

    <p-card [hidden]="!(abaAtual == 3)">
      <p-button [style]="{'widht': '100%'}" label="Cadastrar" (click)="cadastrar()"></p-button>
    </p-card>

    <p-button [hidden]="(abaAtual == 0)" [style]="{'widht': '100%', 'float': 'left'}"
              label="Anterior" icon="pi pi-chevron-left"
              (click)="prevPage()" iconPos="left"></p-button>

    <p-button [hidden]="(abaAtual == 3)" [style]="{'widht': '100%', 'float': 'right'}"
              label="Próximo" icon="pi pi-chevron-right" iconPos="right"
              [disabled]="desabilitarPorAba()" (onClick)="nextPage()"></p-button>
  </div>
</div>

<p-dialog header="Selecione sua raça" [(visible)]="showSelecionarRaca"
          [modal]="true" [style]="{'width':'92%'}">
  <p-carousel [value]="racas" [numVisible]="1"
              [numScroll]="1" [circular]="false">
    <ng-template pTemplate="header">
    </ng-template>
    <ng-template let-raca pTemplate="item">
      <div class="p-grid">
        <div class="p-col-9">
          <h4>
            {{raca?.nome}}
          </h4>
          <p>
            Planeta de origem: {{raca?.nomePlaneta}}
          </p>
          <p style="text-align: justify">
            {{raca?.descricao}}
          </p>
          <p>
            Atributos Base:
          </p>
          <div class="p-grid">
            <div *ngFor="let atributo of raca.listaAtributos; index as j;"
                 class="p-col-4">
              {{atributo.nome}}:
              <span class="p-badge">{{atributo.valor}}</span>
            </div>
          </div>
        </div>
        <div class="p-col-3">
          <img src="assets/img/draconians.png" style="zoom: 0.7; width: 100%; height: 90%"
               alt="Draconians">
        </div>
        <hr class="solid" style="border-top: 3px solid #bbb;">
        <div class="p-col-4"></div>
        <div class="p-col-4">
          <p-button label="Selecionar" (onClick)="selecionarRaca(raca)"
                    [style]="{'width': '100%'}"></p-button>
        </div>
        <div class="p-col-4"></div>
      </div>
    </ng-template>
  </p-carousel>
</p-dialog>


<p-dialog header="Selecione sua classe" [style]="{'width':'92%'}" [modal]="true"
          [(visible)]="showSelecionarClasse">
  <p-carousel [value]="personagem.raca.listaClasse" [numVisible]="1"
              [numScroll]="1" [circular]="false">
    <ng-template pTemplate="header">
    </ng-template>
    <ng-template let-classe pTemplate="item">
      <div class="p-grid">
        <div class="p-col-12">
          <h4>
            {{classe?.nome}}
          </h4>
          <p style="text-align: justify">
            {{classe?.descricao}}
          </p>
        </div>
        <div class="p-col-12">
          <p>
            Especialidades Base:
          </p>
          <div class="p-grid p-jc-center">
            <div *ngFor="let classe of classe.listaEspecialidades; index as j;" [tooltip]="classe.descricao"
                 class="p-col-4" align="center">
              {{classe.nome}}:
              <span class="p-badge">{{classe.valor}}</span>
            </div>
          </div>
        </div>
        <div class="p-col-4"></div>
        <div class="p-col-4">
          <p-button label="Selecionar" (onClick)="selecionarClasse(classe)"
                    [style]="{'width': '100%'}"></p-button>
        </div>
        <div class="p-col-4"></div>
      </div>
    </ng-template>
  </p-carousel>
</p-dialog>


<p-dialog header="Selecione a cor da pele" [style]="{'width':'60%'}" [modal]="true"
          [(visible)]="showSelecionarPele">
  <div *ngFor="let pele of personagem.raca.listaPele; index as i;">
    <div [class]="personagem.pele.id == pele.id ? 'item-cor-ativo' : 'item-cor'"
         (click)="personagem.pele = pele">
      <p style="margin-left: 4px">
        {{pele.descricao}}:
      </p>
      <div [style]="{'background-color': pele.codigoCor, 'color': pele.codigoCor}">
        TESTE COR
      </div>
    </div>
  </div>
  <p-button [style]="{'widht': '100%'}"
            label="Confirmar" (click)="showSelecionarPele = false"></p-button>
</p-dialog>


<p-dialog header="Selecione a cor do cabelo" [style]="{'width':'60%'}" [modal]="true"
          [(visible)]="showSelecionarCabelo">
  <div *ngFor="let cabelo of personagem.raca.listaCabelo; index as i;">
    <div [class]="personagem.cabelo.id == cabelo.id ? 'item-cor-ativo' : 'item-cor'"
         (click)="personagem.cabelo = cabelo">
      <p style="margin-left: 4px">
        {{cabelo.descricao}}:
      </p>
      <div [style]="{'background-color': cabelo.codigoCor, 'color': cabelo.codigoCor}">
        TESTE COR
      </div>
    </div>
  </div>
  <p-button [style]="{'widht': '100%'}"
            label="Confirmar" (click)="showSelecionarCabelo = false"></p-button>
</p-dialog>


<p-dialog header="Selecione a cor do olho" [style]="{'width':'60%'}" [modal]="true"
          [(visible)]="showSelecionarOlho">
  <div *ngFor="let olho of personagem.raca.listaOlho; index as i;">
    <div [class]="personagem.olho.id == olho.id ? 'item-cor-ativo' : 'item-cor'"
         (click)="personagem.olho = olho">
      <p style="margin-left: 4px">
        {{olho.descricao}}:
      </p>
      <div [style]="{'background-color': olho.codigoCor, 'color': olho.codigoCor}">
        TESTE COR
      </div>
    </div>
  </div>
  <p-button [style]="{'widht': '100%'}"
            label="Confirmar" (click)="showSelecionarOlho = false"></p-button>
</p-dialog>

<p-dialog header="Selecione a cor do olho" [style]="{'width':'60%'}" [modal]="true"
          [(visible)]="showSelecionarOlho">
  <div *ngFor="let olho of personagem.raca.listaOlho; index as i;">
    <div [class]="personagem.olho.id == olho.id ? 'item-cor-ativo' : 'item-cor'"
         (click)="personagem.olho = olho">
      <p style="margin-left: 4px">
        {{olho.descricao}}:
      </p>
      <div [style]="{'background-color': olho.codigoCor, 'color': olho.codigoCor}">
        TESTE COR
      </div>
    </div>
  </div>
  <p-button [style]="{'widht': '100%'}"
            label="Confirmar" (click)="showSelecionarOlho = false"></p-button>
</p-dialog>

<p-dialog header="Sucesso!" [style]="{'width':'60%'}" [modal]="true"
          [(visible)]="showCadastroSucesso">
  <p>
    O cadastro do seu personagem foi realizado com sucesso, agora ele já se encontra disponivel para jogar.
  </p>
  <br/>
  <p>
    Deseja jogar com esse personagem ou prefere retornar a tela de escolha de personagem?
  </p>
  <p-button [style]="{'widht': '50%'}"
            label="Jogar com personagem" routerLink="../../personagem"></p-button>
  <p-button [style]="{'widht': '50%'}"
            label="Retornar para listagem" routerLink="../../personagens"></p-button>
</p-dialog>

<p-confirmDialog [style]="{width: '50vw'}" [baseZIndex]="10000"></p-confirmDialog>
